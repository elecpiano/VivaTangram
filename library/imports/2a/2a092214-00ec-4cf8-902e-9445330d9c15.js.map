{"version":3,"sources":["../../../../assets/Script/assets/Script/HomeViewController.ts"],"names":[],"mappings":";;;;;AAAA,iEAA4D;AAEtD,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAQ,CAAkB;AAG1C;IAAgD,sCAAY;IAD5D;QAGI,oBAAoB;QAHxB,qEA2RC;QArRG,qBAAe,GAA0B,IAAI,CAAC;QAE9C,iBAAW,GAAY,IAAI,CAAC;QAI5B,2BAAqB,GAAW,KAAK,CAAC;QACtC,yBAAmB,GAAG,GAAG,CAAC,CAAC,kCAAkC;QAE7D,iBAAW,GAAG,KAAK,EAAU,CAAC;QAC9B,iBAAW,GAAG,KAAK,EAAU,CAAC;QAC9B,mBAAa,GAAG,KAAK,EAAU,CAAC;QAChC,kBAAY,GAAW,GAAG,CAAC;QAC3B,kBAAY,GAAW,GAAG,CAAC;QAC3B,kBAAY,GAAG,IAAI,KAAK,EAAU,CAAC;QACnC,iBAAW,GAAG,IAAI,KAAK,EAAU,CAAC;QAClC,sBAAgB,GAAW,GAAG,CAAC;QAC/B,YAAM,GAAG,KAAK,CAAC;QAEf,mBAAa,GAAY,CAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,CAAC,CAAC;QACjG,0EAA0E;QAC1E,0BAAoB,GAAW,KAAK,CAAC;QACrC,gBAAU,GAAG,CAAC,CAAC,CAAC,wFAAwF;QACxG,gBAAU,GAAY,CAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,CAAC,CAAC;QAC9F,oBAAc,GAAG,KAAK,EAAU,CAAC;QAEjC,eAAS,GAAG,KAAK,EAAU,CAAC;QAC5B,UAAI,GAAG,KAAK,EAAW,CAAC;QACxB,YAAM,GAAG,KAAK,EAAU,CAAC;QACzB,YAAM,GAAG,KAAK,EAAU,CAAC;QAEzB,kBAAY,GAAG,CAAC,CAAC;;QAoPjB,YAAY;IAEhB,CAAC;IApPG,YAAY;IAEZ,oBAAoB;IAEpB,yCAAY,GAAZ;QACI,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;IACtC,CAAC;IAED,0CAAa,GAAb;QACI,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;IACvC,CAAC;IAED,YAAY;IAEZ,mBAAmB;IAEnB,mCAAM,GAAN;QACI,IAAI,CAAC,QAAQ,EAAE,CAAC;IACpB,CAAC;IAED,kCAAK,GAAL;QAAA,iBAWC;QAVG,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;QACvD,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE;YACZ,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;SAC1D;QAED,cAAc;QACd,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,QAAQ,CAC3B,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,gBAAgB,CAAC,EACnC,EAAE,CAAC,QAAQ,CAAC,cAAI,OAAA,KAAI,CAAC,eAAe,EAAE,EAAtB,CAAsB,EAAC,IAAI,CAAC,CAC/C,CAAC,CAAC;IACP,CAAC;IAED,mCAAM,GAAN,UAAQ,EAAE;QACN,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,EAAE;YAC7B,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC;SACzB;IACL,CAAC;IAED,YAAY;IAEZ,iCAAiC;IAEjC,qCAAQ,GAAR;QAAA,iBAOC;QANG,EAAE,CAAC,MAAM,CAAC,OAAO,CACb,OAAO,EACP,UAAC,KAAK,EAAE,GAAU;YACd,KAAI,CAAC,SAAS,GAAG,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;QACrC,CAAC,CACJ,CAAC;IACN,CAAC;IAED,YAAY;IAEZ,wBAAwB;IAExB,4CAAe,GAAf;QAAA,iBAgBC;QAfG,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;QAEtE,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QAEnB,IAAI,CAAC,YAAY,EAAE,CAAC;QACpB,IAAI,CAAC,YAAY,EAAE,CAAC;QAEpB,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,UAAU,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC;QAChE,IAAI,WAAW,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC,CAAA,iCAAiC;QAEhF,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,QAAQ,CAC3B,EAAE,CAAC,QAAQ,CAAC,cAAI,OAAA,KAAI,CAAC,eAAe,CAAC,SAAS,CAAC,KAAI,CAAC,IAAI,EAAE,KAAI,CAAC,MAAM,CAAC,EAAtD,CAAsD,EAAC,IAAI,CAAC,EAC5E,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,EACjB,EAAE,CAAC,QAAQ,CAAC,cAAI,OAAA,KAAI,CAAC,SAAS,CAAC,WAAW,CAAC,EAA3B,CAA2B,EAAC,IAAI,CAAC,CACpD,CAAC,CAAC;IACP,CAAC;IAED,yCAAY,GAAZ;QACI,IAAI,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QAE9C,gBAAgB;QAChB,IAAI,UAAU,GAAG,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAElC,OAAO;QACP,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,EAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACrC,IAAI,cAAc,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAC9C,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,cAAc,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC5C,IAAI,MAAM,GAAG,cAAc,CAAC,CAAC,CAAC,CAAC;YAC/B,IAAI,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACjD,IAAI,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACjD,4CAA4C;YAC5C,IAAI,WAAW,GAAG,IAAI,EAAE,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,EAAC,IAAI,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;YAClD,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;SAC/B;QAED,QAAQ;QACR,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,EAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QACzC,IAAI,YAAY,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAC5C,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,YAAY,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC1C,IAAI,QAAQ,GAAG,YAAY,CAAC,CAAC,CAAC,CAAC;YAC/B,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;SAC9B;QAED,QAAQ;QACR,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,EAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QACzC,IAAI,YAAY,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAC5C,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,YAAY,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC1C,IAAI,QAAQ,GAAG,YAAY,CAAC,CAAC,CAAC,CAAC;YAC/B,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;SAC9B;IACL,CAAC;IAED,sCAAS,GAAT,UAAU,WAAkB;QACxB,IAAI,WAAW,GAAG,CAAC,EAAE;YACjB,OAAO;SACV;QAED,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC;QAElB,gDAAgD;QAChD,IAAI,SAAS,GAAG,CAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAE,CAAC;QACxC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,EAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;QACnD,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,EAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;QACnD,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,EAAC,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;QAEvD,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,WAAW,EAAE;YAC1C,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC;YACxD,IAAI,GAAG,GAAG,SAAS,CAAC,MAAM,CAAC,IAAI,EAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACtC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YAC3B,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;SAC9B;QAED,uBAAuB;QACvB,SAAS,GAAG,CAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAE,CAAC;QACpC,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,EAAC,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;QACzD,OAAO,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE;YACzB,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC;YACxD,IAAI,GAAG,GAAG,SAAS,CAAC,MAAM,CAAC,IAAI,EAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACtC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;SACjC;QAED,eAAe;QACf,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,EAAC,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;QACrD,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,CAAC,CAAC;QAEpC,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,EAAE;YAC7B,IAAI,CAAC,aAAa,EAAE,CAAC;SACxB;aACG;YACA,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;YACpB,IAAI,CAAC,eAAe,EAAE,CAAC;SAC1B;IACL,CAAC;IAED,0CAAa,GAAb;QAAA,iBAUC;QATG,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,GAAC,CAAC,EAAE;YAC3B,IAAI,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,GAAG,EAAE,CAAC;YACjC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,4DAA4D;YAExF,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,QAAQ,CAC3B,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,YAAY,CAAC,EAC/B,EAAE,CAAC,QAAQ,CAAC,cAAI,OAAA,KAAI,CAAC,aAAa,EAAE,EAApB,CAAoB,EAAC,IAAI,CAAC,CAC7C,CAAC,CAAC;SACN;IACL,CAAC;IAED,yCAAY,GAAZ,UAAa,EAAU;QAAvB,iBAmCC;QAlCG,IAAI,CAAC,GAAG,CAAC,CAAC;QACV,OAAO,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE;YAChC,IAAI,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,YAAY,EAAE;gBAC7D,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC;aAChC;iBACG;gBACA,CAAC,EAAE,CAAC;aACP;SACJ;QAED,KAAK,IAAI,GAAC,GAAG,CAAC,EAAE,GAAC,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,GAAC,EAAE,EAAE;YAC9C,IAAI,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,GAAC,CAAC,CAAC;YAChC,IAAI,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,YAAY,EAAE;gBAC9C,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;aAClC;SACJ;QAED,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC;QAElB,KAAK,IAAI,GAAC,GAAG,CAAC,EAAE,GAAC,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,GAAC,EAAE,EAAE;YACzC,6DAA6D;YAC7D,IAAI,KAAK,GAAG,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,GAAC,CAAC,EAAC,IAAI,CAAC,YAAY,CAAC,GAAC,IAAI,CAAC,YAAY,CAAC;YAC1G,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,GAAC,CAAC,EAAE,GAAC,EAAE,KAAK,CAAC,CAAC;SAC9C;QAED,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,IAAI,CAAC,EAAE;YAC9B,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;YAEpB,oBAAoB;YACpB,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,QAAQ,CAC3B,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,gBAAgB,CAAC,EACnC,EAAE,CAAC,QAAQ,CAAC,cAAI,OAAA,KAAI,CAAC,eAAe,EAAE,EAAtB,CAAsB,EAAC,IAAI,CAAC,CAC/C,CAAC,CAAC;SACN;IACL,CAAC;IAED,wCAAW,GAAX,UAAY,WAAkB,EAAE,UAAiB,EAAE,KAAa;QAC5D,IAAI,IAAI,GAAG,WAAW,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAElC,IAAI,MAAM,GAAG,CAAC,CAAC;QACf,IAAI,MAAM,GAAG,CAAC,CAAC;QAEf,IAAI,CAAC,GAAG,CAAC,CAAC;QACV,OAAO,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE;YACpB,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACrC,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACrC,IAAI,CAAC,IAAI,CAAC,EAAE;gBACR,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC;gBACtB,MAAM,GAAG,CAAC,CAAC;gBACX,MAAM,GAAG,CAAC,CAAC;aACd;iBACI,IAAG,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,GAAE,CAAE,CAAC,CAAC,EAAC;gBAC5B,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,EAAC,MAAM,CAAC,CAAC;aACnC;iBACG;gBACA,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC;aACzB;YACD,CAAC,EAAG,CAAC;SACR;QAED,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC;QAElB,IAAI,IAAI,CAAC,oBAAoB,EAAE;YAC3B,IAAI,CAAC,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC,UAAU,CAAC,IAAI,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC,CAAC;SACvE;aACG;YACA,IAAI,CAAC,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;SACzF;QAED,IAAI,CAAC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACtD,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;IACrB,CAAC;IAED,yCAAY,GAAZ;QACI,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC;QAClB,IAAI,CAAC,eAAe,CAAC,UAAU,EAAE,CAAC;IACtC,CAAC;IAjRD;QADC,QAAQ,CAAC,+BAAqB,CAAC;+DACc;IAE9C;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;2DACU;IAPX,kBAAkB;QADtC,OAAO;OACa,kBAAkB,CA0RtC;IAAD,yBAAC;CA1RD,AA0RC,CA1R+C,EAAE,CAAC,SAAS,GA0R3D;kBA1RoB,kBAAkB","file":"","sourceRoot":"../../../../assets/Script","sourcesContent":["import FrameCanvasController from \"./FrameCanvasController\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class HomeViewController extends cc.Component {\n\n    //#region Properties\n\n    @property(FrameCanvasController)\n    FrameController: FrameCanvasController = null;\n    @property(cc.Node)\n    ShapeCanvas: cc.Node = null;\n\n    draw: cc.Graphics;\n\n    NavigatedFromListView:boolean = false;\n    ShapeCanvasAlphaMax = 150; // 0 is transparent, 255 is filled\n\n    AppearQueue = Array<number>();\n    ShownShpaes = Array<number>();\n    UnshownShpaes = Array<number>();\n    drawDuration: number = 0.3;\n    drawInterval: number = 0.2;\n    drawTimeList = new Array<number>();\n    drawingList = new Array<number>();\n    TANGRAM_INTERVAL: number = 0.9;\n    IsBusy = false;\n\n    TangramColors:string[] = [\"#5faace\",\"#3992bc\",\"#287ca3\",\"#19678b\",\"#105778\",\"#074561\",\"#05354b\"];\n    //[\"#ffda4c\",\"#52cad1\",\"#ff493a\",\"#3968bc\",\"#ff8e2f\",\"#ca4c89\",\"#55d723\"];\n    ShowTangramFullColor:boolean = false;\n    Difficulty = 7; // 0 is most difficult, 7 shows all shapes(without color), 8 shows all shapes with color\n    HintColors:string[] = [\"#5faace\",\"#3992bc\",\"#287ca3\",\"#19678b\",\"#105778\",\"#074561\",\"#05354b\"];\n    HintColorRemap = Array<number>();\n\n    ParamData = Array<string>();\n    Dots = Array<cc.Vec2>();\n    Shapes = Array<string>();\n    Frames = Array<string>();\n    \n    TangramIndex = 0;\n\n    //#endregion\n\n    //#region Navigation\n\n    GoToListView(){\n        cc.director.loadScene(\"ListView\");\n    }\n\n    GoToGameBoard(){\n        cc.director.loadScene(\"GameBoard\");\n    }\n\n    //#endregion\n\n    //#region Lifecycle\n\n    onLoad () {\n        this.LoadData();\n    }\n\n    start () {\n        this.draw = this.ShapeCanvas.getComponent(cc.Graphics);\n        if (!this.draw) {\n            this.draw = this.ShapeCanvas.addComponent(cc.Graphics);\n        }\n\n        //show tangram\n        this.node.runAction(cc.sequence(\n            cc.delayTime(this.TANGRAM_INTERVAL),\n            cc.callFunc(()=>this.ShowNextTangram(),this)\n        ));\n    }\n\n    update (dt) {\n        if (this.drawingList.length > 0) {\n            this.UpdateRender(dt);\n        }\n    }\n\n    //#endregion\n\n    //#region Param Data & Dictionary\n\n    LoadData(){\n        cc.loader.loadRes(\n            \"param\",\n            (error, txt:string)=>{\n                this.ParamData = txt.split(\"\\n\");\n            }\n        );\n    }\n\n    //#endregion\n\n    //#region Tangram Render\n    \n    ShowNextTangram(){\n        this.TangramIndex = Math.floor(Math.random() * this.ParamData.length);\n\n        this.IsBusy = true;\n\n        this.ClearTangram();\n        this.PrepareParam();\n\n        this.ShowTangramFullColor = this.Difficulty == 8 ? true : false;\n        let appearCount = Math.min(this.Difficulty, 7);// this.Difficulty may go up to 8\n        \n        this.node.runAction(cc.sequence(\n            cc.callFunc(()=>this.FrameController.StartDraw(this.Dots, this.Frames),this),\n            cc.delayTime(0.5),\n            cc.callFunc(()=>this.StartDraw(appearCount),this)\n        ));\n    }\n\n    PrepareParam(){\n        let param = this.ParamData[this.TangramIndex];\n        \n        // begin prepare\n        let paramArray = param.split(\"/\");\n\n        // dots\n        this.Dots.splice(0,this.Dots.length);\n        let dotsPositonStr = paramArray[0].split(\";\");\n        for (let i = 0; i < dotsPositonStr.length; i++) {\n            let posStr = dotsPositonStr[i];\n            let x = Math.round(Number(posStr.split(\",\")[0]));\n            let y = Math.round(Number(posStr.split(\",\")[1]));\n            // let dotPosition = new cc.Vec2(x,512 - y);\n            let dotPosition = new cc.Vec2(x * 2,1024 - y * 2);\n            this.Dots.push(dotPosition);\n        }\n\n        //shapes\n        this.Shapes.splice(0,this.Shapes.length);\n        let shapeListStr = paramArray[1].split(\";\");\n        for (let i = 0; i < shapeListStr.length; i++) {\n            let shapeStr = shapeListStr[i];\n            this.Shapes.push(shapeStr);\n        }\n\n        //frames\n        this.Frames.splice(0,this.Frames.length);\n        let frameListStr = paramArray[2].split(\";\");\n        for (let i = 0; i < frameListStr.length; i++) {\n            let frameStr = frameListStr[i];\n            this.Frames.push(frameStr);\n        }\n    }\n\n    StartDraw(appearCount:number){\n        if (appearCount > 7) {\n            return;\n        }\n\n        this.draw.clear();\n\n        // randomize appear queue, populate shown shapes\n        let tempQueue = [ 0, 1, 2, 3, 4, 5, 6 ];\n        this.AppearQueue.splice(0,this.AppearQueue.length);\n        this.ShownShpaes.splice(0,this.ShownShpaes.length);\n        this.UnshownShpaes.splice(0,this.UnshownShpaes.length);\n\n        while (this.AppearQueue.length < appearCount) {\n            let rand = Math.floor(Math.random() * tempQueue.length);\n            let idx = tempQueue.splice(rand,1)[0];\n            this.AppearQueue.push(idx);\n            this.ShownShpaes.push(idx);\n        }\n\n        // randomize hint color\n        tempQueue = [ 0, 1, 2, 3, 4, 5, 6 ];\n        this.HintColorRemap.splice(0,this.HintColorRemap.length);\n        while (tempQueue.length > 0) {\n            let rand = Math.floor(Math.random() * tempQueue.length);\n            let idx = tempQueue.splice(rand,1)[0];\n            this.HintColorRemap.push(idx);\n        }\n\n        // drawTimeList\n        this.drawTimeList.splice(0,this.drawTimeList.length);\n        this.drawTimeList = [0,0,0,0,0,0,0];\n\n        if (this.AppearQueue.length > 0) {\n            this.ShowNextShape();            \n        }\n        else{\n            this.IsBusy = false;\n            this.ShowNextTangram();\n        }\n    }\n\n    ShowNextShape(){\n        if (this.AppearQueue.length>0) {\n            let idx = this.AppearQueue.pop();\n            this.drawingList.push(idx); /* this will trigger corresponding drawtime begin to tick */\n\n            this.node.runAction(cc.sequence(\n                cc.delayTime(this.drawInterval),\n                cc.callFunc(()=>this.ShowNextShape(),this)\n            ));\n        }\n    }\n\n    UpdateRender(dt: number){\n        let i = 0;\n        while (i < this.drawingList.length) {\n            if (this.drawTimeList[this.drawingList[i]] >= this.drawDuration) { \n                this.drawingList.splice(i,1);\n            }\n            else{\n                i++;\n            }\n        }\n\n        for (let i = 0; i < this.drawingList.length; i++) {\n            let index = this.drawingList[i];\n            if (this.drawTimeList[index] < this.drawDuration) { \n                this.drawTimeList[index] += dt;\n            }\n        }\n\n        this.draw.clear();\n\n        for (let i = 0; i < this.Shapes.length; i++) {\n            /* if alpha is greater than 255, it will re-count from 256 */\n            let alpha = this.ShapeCanvasAlphaMax * Math.min(this.drawTimeList[i],this.drawDuration)/this.drawDuration;\n            this.RenderShape(this.Shapes[i], i, alpha);\n        }\n\n        if (this.drawingList.length == 0) {\n            this.IsBusy = false;\n            \n            // show next tangram\n            this.node.runAction(cc.sequence(\n                cc.delayTime(this.TANGRAM_INTERVAL),\n                cc.callFunc(()=>this.ShowNextTangram(),this)\n            ));\n        }\n    }\n\n    RenderShape(shapeString:string, colorIndex:number, alpha: number){\n        let dots = shapeString.split(\",\");\n\n        let startX = 0;\n        let startY = 0;\n\n        let i = 0;\n        while (i < dots.length) {\n            let x = this.Dots[Number(dots[i])].x;\n            let y = this.Dots[Number(dots[i])].y;\n            if (i == 0) {\n                this.draw.moveTo(x,y);\n                startX = x;\n                startY = y;\n            }\n            else if(i == (dots.length/ - 2)){\n                this.draw.lineTo(startX,startY);\n            }\n            else{\n                this.draw.lineTo(x,y);\n            }\n            i ++;\n        }\n\n        this.draw.close();\n\n        if (this.ShowTangramFullColor) {\n            this.draw.fillColor = cc.hexToColor(this.TangramColors[colorIndex]);\n        }\n        else{\n            this.draw.fillColor = cc.hexToColor(this.HintColors[this.HintColorRemap[colorIndex]]);\n        }\n\n        this.draw.fillColor = this.draw.fillColor.setA(alpha);\n        this.draw.fill();\n    }\n\n    ClearTangram(){\n        this.draw.clear();\n        this.FrameController.ClearFrame();\n    }\n\n    //#endregion\n\n}\n"]}